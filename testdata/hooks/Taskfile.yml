version: '3'

tasks:
  success:
    cmds:
      - echo "command executed" > success.txt
    hooks:
      after_all:
        - echo "success" > after_all.txt
      before_all:
        - echo "success" > before_all.txt
      on_success:
        - echo "on_success" > on_success.txt

  failure:
    cmds:
      - echo "command executed" > failure.txt
      - exit 1
    hooks:
      after_all:
        - echo "failure" > after_all.txt
      before_all:
        - echo "failure" > before_all.txt
      on_failure:
        - echo "on_failure" > on_failure.txt

  skipped_status:
    status:
      - echo "no errors here"
    cmds:
      - echo "i won't get here" > skipped.txt
    hooks:
      on_skipped:
        - echo "on_skipped_status" > on_skipped.txt

  skipped_preconditions:
    preconditions:
      - sh: "exit 1"
    cmds:
      - echo "i won't get here" > skipped.txt
    hooks:
      on_skipped:
        - echo "on_skipped_preconditions" > on_skipped.txt