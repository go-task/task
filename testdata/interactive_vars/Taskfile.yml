version: "3"

# Test case for the visited bug:
# - build is called twice with different vars
# - First call provides TARGET, second doesn't
# - BUG: we should prompt for TARGET but we don't

tasks:
  main:
    desc: Main task that calls build twice with different vars
    deps:
      - task: build
      - task: build
    cmds:
      - echo "Main done"

  build:
    desc: Build task requiring TARGET
    requires:
      vars:
        - name: TARGET
          enum:
            - linux
            - windows
            - darwin
    cmds:
      - echo "Building for target = {{.TARGET}} (mode={{.MODE}})"
